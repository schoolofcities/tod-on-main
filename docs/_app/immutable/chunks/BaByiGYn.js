import"./DsnmJJEf.js";import{i as Ee}from"./_N55PR4H.js";import{a3 as be,x as De,aU as ye,a1 as j,y as R,I as Be,z as ze,U as u,ag as Ue,Z as We,_ as Ye,a0 as le,a2 as ee,H as q,ar as qe,aO as $e,D as ie,a6 as Ve,aV as K,aW as Z,a4 as Pe,aq as fe,aQ as B,ao as ve,aM as Te,i as Xe,a7 as Ae,a8 as Ge,aX as Ke,aY as te,q as ke,G as Se,aZ as Ze,aC as Je,a_ as Qe,aL as je,a$ as et,ae as Ce,E as tt,b0 as at,b1 as rt,e as it,u as F,b2 as nt,aE as Ie,b3 as st,F as $,K as W,Y as V,a as z,M as C,P as S,J as He,b4 as ce,b5 as ot,L as Me,N as G,ad as D,V as de,c as lt,f as ft,b6 as vt}from"./D5hBMtvy.js";import{t as ct,a as U,c as dt,s as ue,h as Ne}from"./CKb5fctr.js";import{o as pe}from"./BeynROVX.js";import{p as L,i as ut}from"./BYWeF8EQ.js";import{b as pt,s as he,e as _e}from"./B9aYayz-.js";import{b as me}from"./D-CJqX7p.js";function ge(a,e){return e}function ht(a,e,t){for(var n=a.items,i=[],c=e.length,f=0;f<c;f++)Qe(e[f].e,i,!0);var _=c>0&&i.length===0&&t!==null;if(_){var T=t.parentNode;je(T),T.append(t),n.clear(),N(a,e[0].prev,e[c-1].next)}et(i,()=>{for(var l=0;l<c;l++){var p=e[l];_||(n.delete(p.k),N(a,p.prev,p.next)),Se(p.e,!_)}})}function ne(a,e,t,n,i,c=null){var f=a,_={flags:e,items:new Map,first:null},T=(e&ye)!==0;if(T){var l=a;f=R?j(Be(l)):l.appendChild(be())}R&&ze();var p=null,E=!1,b=new Map,A=Ue(()=>{var m=t();return Xe(m)?m:m==null?[]:Te(m)}),s,o;function v(){_t(o,s,_,b,f,i,e,n,t),c!==null&&(s.length===0?p?Ae(p):p=ie(()=>c(f)):p!==null&&Ge(p,()=>{p=null}))}De(()=>{o??=Ce,s=u(A);var m=s.length;if(E&&m===0)return;E=m===0;let w=!1;if(R){var h=We(f)===Ye;h!==(m===0)&&(f=le(),j(f),ee(!1),w=!0)}if(R){for(var g=null,x,r=0;r<m;r++){if(q.nodeType===qe&&q.data===$e){f=q,w=!0,ee(!1);break}var d=s[r],y=n(d,r);x=se(q,_,g,null,d,y,r,i,e,t),_.items.set(y,x),g=x}m>0&&j(le())}if(R)m===0&&c&&(p=ie(()=>c(f)));else if(Ve()){var k=new Set,H=Pe;for(r=0;r<m;r+=1){d=s[r],y=n(d,r);var I=_.items.get(y)??b.get(y);I?(e&(K|Z))!==0&&Fe(I,d,r,e):(x=se(null,_,null,null,d,y,r,i,e,t,!0),b.set(y,x)),k.add(y)}for(const[M,P]of _.items)k.has(M)||H.skipped_effects.add(P.e);H.add_callback(v)}else v();w&&ee(!0),u(A)}),R&&(f=q)}function _t(a,e,t,n,i,c,f,_,T){var l=(f&Ze)!==0,p=(f&(K|Z))!==0,E=e.length,b=t.items,A=t.first,s=A,o,v=null,m,w=[],h=[],g,x,r,d;if(l)for(d=0;d<E;d+=1)g=e[d],x=_(g,d),r=b.get(x),r!==void 0&&(r.a?.measure(),(m??=new Set).add(r));for(d=0;d<E;d+=1){if(g=e[d],x=_(g,d),r=b.get(x),r===void 0){var y=n.get(x);if(y!==void 0){n.delete(x),b.set(x,y);var k=v?v.next:s;N(t,v,y),N(t,y,k),ae(y,k,i),v=y}else{var H=s?s.e.nodes_start:i;v=se(H,t,v,v===null?t.first:v.next,g,x,d,c,f,T)}b.set(x,v),w=[],h=[],s=v.next;continue}if(p&&Fe(r,g,d,f),(r.e.f&te)!==0&&(Ae(r.e),l&&(r.a?.unfix(),(m??=new Set).delete(r))),r!==s){if(o!==void 0&&o.has(r)){if(w.length<h.length){var I=h[0],M;v=I.prev;var P=w[0],J=w[w.length-1];for(M=0;M<w.length;M+=1)ae(w[M],I,i);for(M=0;M<h.length;M+=1)o.delete(h[M]);N(t,P.prev,J.next),N(t,v,P),N(t,J,I),s=I,v=J,d-=1,w=[],h=[]}else o.delete(r),ae(r,s,i),N(t,r.prev,r.next),N(t,r,v===null?t.first:v.next),N(t,v,r),v=r;continue}for(w=[],h=[];s!==null&&s.k!==x;)(s.e.f&te)===0&&(o??=new Set).add(s),h.push(s),s=s.next;if(s===null)continue;r=s}w.push(r),v=r,s=r.next}if(s!==null||o!==void 0){for(var Y=o===void 0?[]:Te(o);s!==null;)(s.e.f&te)===0&&Y.push(s),s=s.next;var Q=Y.length;if(Q>0){var Re=(f&ye)!==0&&E===0?i:null;if(l){for(d=0;d<Q;d+=1)Y[d].a?.measure();for(d=0;d<Q;d+=1)Y[d].a?.fix()}ht(t,Y,Re)}}l&&ke(()=>{if(m!==void 0)for(r of m)r.a?.apply()}),a.first=t.first&&t.first.e,a.last=v&&v.e;for(var Oe of n.values())Se(Oe.e);n.clear()}function Fe(a,e,t,n){(n&K)!==0&&fe(a.v,e),(n&Z)!==0?fe(a.i,t):a.i=t}function se(a,e,t,n,i,c,f,_,T,l,p){var E=(T&K)!==0,b=(T&Ke)===0,A=E?b?B(i,!1,!1):ve(i):i,s=(T&Z)===0?f:ve(f),o={i:s,v:A,k:c,a:null,e:null,prev:t,next:n};try{if(a===null){var v=document.createDocumentFragment();v.append(a=be())}return o.e=ie(()=>_(a,A,s,l),R),o.e.prev=t&&t.e,o.e.next=n&&n.e,t===null?p||(e.first=o):(t.next=o,t.e.next=o.e),n!==null&&(n.prev=o,n.e.prev=o.e),o}finally{}}function ae(a,e,t){for(var n=a.next?a.next.e.nodes_start:t,i=e?e.e.nodes_start:t,c=a.e.nodes_start;c!==null&&c!==n;){var f=Je(c);i.before(c),c=f}}function N(a,e,t){e===null?a.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function re(a,e,t,n,i,c){var f=a.__className;if(R||f!==t||f===void 0){var _=ct(t,n);(!R||_!==a.getAttribute("class"))&&(_==null?a.removeAttribute("class"):a.className=_),a.__className=t}return c}const mt=()=>performance.now(),O={tick:a=>requestAnimationFrame(a),now:()=>mt(),tasks:new Set};function Le(){const a=O.now();O.tasks.forEach(e=>{e.c(a)||(O.tasks.delete(e),e.f())}),O.tasks.size!==0&&O.tick(Le)}function gt(a){let e;return O.tasks.size===0&&O.tick(Le),{promise:new Promise(t=>{O.tasks.add(e={c:a,f:t})}),abort(){O.tasks.delete(e)}}}function X(a,e){Ie(()=>{a.dispatchEvent(new CustomEvent(e))})}function wt(a){if(a==="float")return"cssFloat";if(a==="offset")return"cssOffset";if(a.startsWith("--"))return a;const e=a.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function we(a){const e={},t=a.split(";");for(const n of t){const[i,c]=n.split(":");if(!i||c===void 0)break;const f=wt(i.trim());e[f]=c.trim()}return e}const xt=a=>a;function Et(a,e,t,n){var i=(a&nt)!==0,c="both",f,_=e.inert,T=e.style.overflow,l,p;function E(){return Ie(()=>f??=t()(e,n?.()??{},{direction:c}))}var b={is_global:i,in(){e.inert=_,X(e,"introstart"),l=oe(e,E(),p,1,()=>{X(e,"introend"),l?.abort(),l=f=void 0,e.style.overflow=T})},out(v){e.inert=!0,X(e,"outrostart"),p=oe(e,E(),l,0,()=>{X(e,"outroend"),v?.()})},stop:()=>{l?.abort(),p?.abort()}},A=Ce;if((A.transitions??=[]).push(b),pt){var s=i;if(!s){for(var o=A.parent;o&&(o.f&tt)!==0;)for(;(o=o.parent)&&(o.f&at)===0;);s=!o||(o.f&rt)!==0}s&&it(()=>{F(()=>b.in())})}}function oe(a,e,t,n,i){var c=n===1;if(st(e)){var f,_=!1;return ke(()=>{if(!_){var v=e({direction:c?"in":"out"});f=oe(a,v,t,n,i)}}),{abort:()=>{_=!0,f?.abort()},deactivate:()=>f.deactivate(),reset:()=>f.reset(),t:()=>f.t()}}if(t?.deactivate(),!e?.duration)return i(),{abort:$,deactivate:$,reset:$,t:()=>n};const{delay:T=0,css:l,tick:p,easing:E=xt}=e;var b=[];if(c&&t===void 0&&(p&&p(0,1),l)){var A=we(l(0,1));b.push(A,A)}var s=()=>1-n,o=a.animate(b,{duration:T,fill:"forwards"});return o.onfinish=()=>{o.cancel();var v=t?.t()??1-n;t?.abort();var m=n-v,w=e.duration*Math.abs(m),h=[];if(w>0){var g=!1;if(l)for(var x=Math.ceil(w/16.666666666666668),r=0;r<=x;r+=1){var d=v+m*E(r/x),y=we(l(d,1-d));h.push(y),g||=y.overflow==="hidden"}g&&(a.style.overflow="hidden"),s=()=>{var k=o.currentTime;return v+m*E(k/w)},p&&gt(()=>{if(o.playState!=="running")return!1;var k=s();return p(k,1-k),!0})}o=a.animate(h,{duration:w,fill:"forwards"}),o.onfinish=()=>{s=()=>n,p?.(n,1-n),i()}},{abort:()=>{o&&(o.cancel(),o.effect=null,o.onfinish=$)},deactivate:()=>{i=$},reset:()=>{n===0&&p?.(1,0)},t:()=>s()}}function xe(a){return function(...e){var t=e[0];return t.preventDefault(),a?.apply(this,e)}}const bt=""+new URL("../assets/sofc-uoft-logo-white-colour.BXkjstT2.svg",import.meta.url).href;var yt=W('<div class="footer svelte-9sff3o"><div class="footer-content svelte-9sff3o"><a href="https://schoolofcities.utoronto.ca/" target="_blank" class="logo-link"><img alt="University of Toronto and School of Cities logos" class="logos svelte-9sff3o"/></a></div></div>');function Ut(a){var e=yt(),t=C(e),n=C(t),i=C(n);S(n),S(t),S(e),V(()=>U(i,"src",bt)),z(a,e)}const Tt=a=>a;function At(a,{delay:e=0,duration:t=400,easing:n=Tt}={}){const i=+getComputedStyle(a).opacity;return{delay:e,duration:t,easing:n,css:c=>`opacity: ${c*i}`}}var kt=W('<div class="image-container"><img loading="lazy"/></div>'),St=W("<div><div><!></div></div>"),Ct=W('<div class="scrolly-wrapper svelte-1o93pel"><div class="sticky-image svelte-1o93pel"></div> <!></div>');function Wt(a,e){He(e,!1);let t=L(e,"imageAlign",8,"center"),n=L(e,"imageWidth",8,"100%"),i=L(e,"imageHeight",8,"100%"),c=L(e,"textSectionAlign",8,"right"),f=L(e,"textSectionMaxWidth",8,"500px"),_=L(e,"fadeDuration",8,250),T=L(e,"sections",24,()=>[{image:"/images/1.jpg",text:"<h2>Header</h2> <p>body text </p>"},{image:"/images/2.jpg",text:"<h2>Header</h2> <p>body text </p>"},{image:"/images/3.jpg",text:"<h2>Header</h2> <p>body text </p>"}]),l=B(0),p=B(0),E=B("0px");pe(()=>{D(l,window.innerHeight);const h=()=>{D(l,window.innerHeight)};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)});let b=B(),A=B(0),s=B([]);const o=()=>{let h=u(A);u(s).forEach((g,x)=>{const r=g.getBoundingClientRect();r.top<=window.innerHeight*.5&&r.bottom>window.innerHeight*.5&&(h=x)}),D(A,h)};pe(()=>(window.addEventListener("scroll",o),o(),()=>{window.removeEventListener("scroll",o)})),ce(()=>(de(i()),u(p),u(l)),()=>{if(typeof i()=="string"){if(i().includes("%")||i().includes("vh")||i().includes("dvh")){const h=parseFloat(i());D(E,`${(100-h)/2}dvh`)}else if(i().includes("px")){const h=parseFloat(i());D(p,Math.max(0,(u(l)-h)/2)),D(E,`${u(p)}px`)}}}),ce(()=>(de(i()),u(l),u(E)),()=>{console.log(i(),u(l),u(E))}),ot(),Ee();var v=Ct(),m=C(v);ne(m,5,T,ge,(h,g,x)=>{var r=lt(),d=ft(r);{var y=k=>{var H=kt(),I=C(H);S(H),V(()=>{re(I,1,dt(t()),"svelte-1o93pel"),U(I,"src",(u(g),F(()=>u(g).image))),U(I,"alt",(u(g),F(()=>u(g).heading))),ue(I,`max-height: ${i()??""}; max-width: ${n()??""}; top: ${u(E)??""};`)}),Et(3,I,()=>At,()=>({duration:_()})),z(k,H)};ut(d,k=>{u(A)===x&&k(y)})}z(h,r)}),S(m);var w=G(m,2);ne(w,1,T,ge,(h,g,x)=>{var r=St(),d=C(r),y=C(d);Ne(y,()=>(u(g),F(()=>u(g).text))),S(d),S(r),me(r,(k,H)=>vt(s,u(s)[H]=k),k=>u(s)?.[k],()=>[x]),V(k=>{re(r,1,`text-section ${c()??""}`,"svelte-1o93pel"),ue(r,`max-width: ${f()??""};`),re(d,1,`text-wrapper ${k??""}`,"svelte-1o93pel")},[()=>(u(g),F(()=>u(g).text.trim()?"":"transparent"))]),z(h,r)}),S(v),me(v,h=>D(b,h),()=>u(b)),z(a,v),Me()}var It=W('<div class="footnote-item svelte-18l7nt0"><sup class="svelte-18l7nt0"><a class="backlink svelte-18l7nt0"><b> </b></a></sup> <p style="display:inline" class="svelte-18l7nt0"><!></p> <a class="backlink svelte-18l7nt0">‚Æù</a></div>'),Ht=W('<div class="footnotes svelte-18l7nt0"><h2 class="svelte-18l7nt0"> </h2> <!></div>');function Yt(a,e){He(e,!1);let t=L(e,"footnotes",8),n=L(e,"footnoteListTitle",8,"References");Ee();var i=Ht(),c=C(i),f=C(c,!0);S(c);var _=G(c,2);ne(_,1,t,T=>T.id,(T,l)=>{var p=It(),E=C(p),b=C(E),A=C(b),s=C(A);S(A),S(b),S(E);var o=G(E,2),v=C(o);Ne(v,()=>(u(l),F(()=>u(l).text))),S(o);var m=G(o,2);S(p),V(()=>{U(p,"id",(u(l),F(()=>`footnote-${u(l).id}`))),U(b,"href",(u(l),F(()=>`#footnote-ref-${u(l).id}`))),he(s,`[${u(l),F(()=>u(l).id)??""}]`),U(m,"href",(u(l),F(()=>`#footnote-ref-${u(l).id}`)))}),_e("click",b,xe(()=>{const w=document.getElementById(`footnote-ref-${u(l).id}`),h=-100;if(w){const g=w.getBoundingClientRect().top+window.pageYOffset+h;window.scrollTo({top:g,behavior:"auto"})}})),_e("click",m,xe(()=>{const w=document.getElementById(`footnote-ref-${u(l).id}`),h=-100;if(w){const g=w.getBoundingClientRect().top+window.pageYOffset+h;window.scrollTo({top:g,behavior:"auto"})}})),z(T,p)}),S(i),V(()=>he(f,n())),z(a,i),Me()}function Mt(a){return a.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(?!\*)(.+?)\*/g,"<em>$1</em>").replace(/\[([^\]]+)]\(([^)]+)\)/g,'<a href="$2" target="_blank">$1</a>')}function qt(){let a=[];function e(t){const n=a.length+1,i=Mt(t);return a.push({id:n,text:i}),[n,i]}return{get footnotes(){return a},addFootnote:e}}export{Yt as F,Wt as S,Ut as a,qt as c,ne as e,ge as i,bt as l,xe as p,re as s};
